<!doctype html>
<html>

<head>
  <meta charset="utf-8" name="viewport" content="width=device-width, user-scalable=no">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/viewerjs@1.10.1/dist/viewer.min.css">
  <link rel="stylesheet" href="./style.css">
  <script src="https://cdn.jsdelivr.net/npm/viewerjs@1.10.1/dist/viewer.min.js"></script>
</head>

<body>
  <div class="map" data-map></div>
  <!-- <div class="map-switcher">
    <button class="map-switcher__button map-switcher__button_active" data-controls-switch="Текущий генплан">Текущий генплан</button>
    <button class="map-switcher__button" data-controls-switch="Новый генплан">Новый генплан</button>
  </div> -->

  <div class="zoom">
    <button class="zoom__button zoom__button_plus" data-controls-zoom-in title="Увеличить масштаб (+)">&#43;</button>
    <button class="zoom__button zoom__button_minus" data-controls-zoom-out
      title="Уменьшить масштаб (-)">&#8722;</button>
  </div>


  <script>
    const PLANS = {
      "Текущий генплан": "/gp-1-min.jpg",
      "Новый генплан": "/gp-2-min.jpg"
    };
    const VIEWER_ZOOM_RATIO = 0.5;

    const image = new Image();
    image.src = Object.values(PLANS)[0];
    image.style.visibility = 'hidden';
    document.querySelector('[data-map]').appendChild(image);

    const viewer = new Viewer(image, {
      title: false,
      navbar: false,
      backdrop: false,
      toolbar: false,
      inline: true,
      fullscreen: false,
      button: false,
      keyboard: false,
      rotatable: false,
      scalable: false,
      slideOnTouch: false,
      tooltip: false,
      transition: true,
      zoomRatio: VIEWER_ZOOM_RATIO,
      maxZoomRatio: 1.6,
      minZoomRatio: .15
    });

    viewer.show();

    const zoomInButton = document.querySelector('[data-controls-zoom-in]');
    const zoomOutButton = document.querySelector('[data-controls-zoom-out]');

    zoomInButton.addEventListener('click', () => {
      viewer.zoom(VIEWER_ZOOM_RATIO);
    });

    zoomOutButton.addEventListener('click', () => {
      viewer.zoom(-VIEWER_ZOOM_RATIO);
    });

    document.addEventListener('keyup', ({ key }) => {
      switch (key) {
        case "-":
          viewer.zoom(-VIEWER_ZOOM_RATIO);
          break;

        case "=":
          viewer.zoom(VIEWER_ZOOM_RATIO);
          break;

        case "0":
          viewer.reset();
          break;
        default: ;
      }
    });
  </script>
</body>


</html>
